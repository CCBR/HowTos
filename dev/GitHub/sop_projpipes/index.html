<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content="Vishal Koparde, Ph.D., Samantha Sevilla, PhD."><link rel="shortcut icon" href=../../img/favicon.ico><title>Projects,Pipelines - CCBR How Tos</title><link rel=stylesheet href=../../css/theme.css><link rel=stylesheet href=../../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><link href=../../css/version-select.css rel=stylesheet><script>
        // Current page data
        var mkdocs_page_name = "Projects,Pipelines";
        var mkdocs_page_input_path = "GitHub/sop_projpipes.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=../.. class="icon icon-home"> CCBR How Tos </a> <div class=version> {'provider': 'mike'} </div><div role=search> <form id=rtd-search-form class=wy-form action=../../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=../..>Intro</a> </li> </ul> <p class=caption><span class=caption-text>GitHub</span></p> <ul class=current> <li class=toctree-l1><a href=../overview/ class="reference internal">Overview</a> </li> <li class=toctree-l1><a class="reference internal">Set-Up</a> <ul> <li class=toctree-l2><a href=../howto_setup/ class="reference internal">Preparing your environment</a> </li> <li class=toctree-l2><a href=../howto_functions/ class="reference internal">Basic Commands</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Basics</a> <ul> <li class=toctree-l2><a href=../basic_repo/ class="reference internal">Creating your GitHub Repo</a> </li> <li class=toctree-l2><a href=../basic_docs/ class="reference internal">Creating your Documentation</a> </li> <li class=toctree-l2><a href=../basic_actions/ class="reference internal">Creating GitHub Actions</a> </li> <li class=toctree-l2><a href=../howto_precommit/ class="reference internal">Using Pre-Commit</a> </li> </ul> </li> <li class="toctree-l1 current"><a class="reference internal current">Best Practices</a> <ul class=current> <li class="toctree-l2 current"><a class="reference internal current" href=#>Projects,Pipelines</a> <ul class=current> <li class=toctree-l3><a class="reference internal" href=#pipeline-documentation>Pipeline Documentation</a> </li> <li class=toctree-l3><a class="reference internal" href=#repository-management>Repository Management</a> <ul> <li class=toctree-l4><a class="reference internal" href=#security-settings>Security settings</a> </li> <li class=toctree-l4><a class="reference internal" href=#ccbr-branch-strategy>CCBR Branch Strategy</a> </li> <li class=toctree-l4><a class="reference internal" href=#pipelines-test-data>Pipelines Test Data</a> </li> </ul> </li> </ul> </li> <li class=toctree-l2><a href=../sop_techdev/ class="reference internal">TechDev</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>TechDev</span></p> <ul> <li class=toctree-l1><a href=../sop_techdev/ class="reference internal">TechDev</a> </li> </ul> <p class=caption><span class=caption-text>HPCDME</span></p> <ul> <li class=toctree-l1><a href=../../HPCDME/setup/ class="reference internal">Setup</a> </li> <li class=toctree-l1><a href=../../HPCDME/transfer/ class="reference internal">Biowulf2HPCDME</a> </li> <li class=toctree-l1><a href=../../HPCDME/transferFromHelix/ class="reference internal">Helix2HPCDME</a> </li> </ul> <p class=caption><span class=caption-text>UCSC Tracks</span></p> <ul> <li class=toctree-l1><a href=../../UCSC/overview/ class="reference internal">Overview</a> </li> <li class=toctree-l1><a href=../../UCSC/creating_inputs/ class="reference internal">Creating Inputs</a> </li> <li class=toctree-l1><a href=../../UCSC/creating_track_info/ class="reference internal">Creating Tracks Info</a> </li> <li class=toctree-l1><a href=../../UCSC/creating_tracks/ class="reference internal">Creating Tracks</a> </li> </ul> <p class=caption><span class=caption-text>Creating an R Package</span></p> <ul> <li class=toctree-l1><a href=../../Rpackage/setup/ class="reference internal">Set-Up</a> </li> <li class=toctree-l1><a href=../../Rpackage/build_pkg/ class="reference internal">Creating the package</a> </li> <li class=toctree-l1><a href=../../Rpackage/common_issues/ class="reference internal">Troubleshooting</a> </li> </ul> <p class=caption><span class=caption-text>Other How Tos</span></p> <ul> <li class=toctree-l1><a href=../../OtherHowTos/datashare/ class="reference internal">Datashare</a> </li> <li class=toctree-l1><a href=../../OtherHowTos/zenodo/ class="reference internal">Zenodo</a> </li> <li class=toctree-l1><a href=../../OtherHowTos/lucidcharts/ class="reference internal">LucidCharts</a> </li> </ul> <p class=caption><span class=caption-text>Tutorials</span></p> <ul> <li class=toctree-l1><a href=../../Tutorials/snakemake/ class="reference internal">Snakemake</a> </li> </ul> <ul> <li class=toctree-l1><a href=../../contributions/ class="reference internal">Contributions</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=../..>CCBR How Tos</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=../.. class="icon icon-home" aria-label=Docs></a></li> <li class=breadcrumb-item>GitHub</li> <li class=breadcrumb-item>Best Practices</li> <li class="breadcrumb-item active">Projects,Pipelines</li> <li class=wy-breadcrumbs-aside> <a href=https://github.com/CCBR/HowTos/edit/main/docs/GitHub/sop_projpipes.md>Edit on CCBR/HowTos</a> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <h1 id=github-best-practices-projects-and-pipelines>GitHub Best Practices: Projects and Pipelines<a class=headerlink href=#github-best-practices-projects-and-pipelines title="Permanent link">&para;</a></h1> <ul> <li> <p>Users should follow these links to learn more about setting up the repository, before reviewing the best practices below:</p> <ul> <li><a href=../howto_setup/ >Preparing your environment</a></li> <li><a href=../howto_functions/ >Basic Commands</a></li> <li><a href=GitHub/basic_repo.md>Creating your GitHub repo</a></li> <li><a href=setup_docs.md>Creating your Documentation</a></li> <li><a href=../basic_actions/ >GitHub Actions</a></li> </ul> </li> </ul> <h2 id=pipeline-documentation>Pipeline Documentation<a class=headerlink href=#pipeline-documentation title="Permanent link">&para;</a></h2> <ul> <li> <p>All pipelines should provide users with documentation for usage, test data, expected outputs, and troubleshooting information. <a href=https://www.mkdocs.org/ >Mkdocs</a> is the recommended tool to perform this action, however, other tools may be utilized. The template's (<a href=https://github.com/CCBR/CCBR_NextflowTemplate>NextFlow</a>, <a href=https://github.com/CCBR/CCBR_SnakemakeTemplate>Snakemake</a>) were written for mkdocs, and provide basic yaml markdown files provided for this use. They should be edited according to the pipelines function and user needs. Examples of the requirements for each page are provided in the templates.</p> <ol> <li>Background<ul> <li>Information on who the pipeline was developed for, and a statement if it's only been tested on Biowulf. </li> <li>Also include a workflow image to summarize the pipeline.</li> </ul> </li> <li>Getting Started<ul> <li>This should set the stage for all of the pipeline requirements. This should include the following pages:<ul> <li>Introduction</li> <li>Setup Dependencies</li> <li>Login to the cluster</li> <li>Load an interactive session</li> </ul> </li> </ul> </li> <li>Preparing Files<ul> <li>This should include the following pages:<ul> <li>Configs<ul> <li>Cluster Config</li> <li>Tools Config</li> <li>Config YAML<ul> <li>User Parameters</li> <li>References</li> </ul> </li> </ul> </li> <li>Preparing Manifests<ul> <li>Samples Manifest</li> </ul> </li> </ul> </li> </ul> </li> <li>Running the Pipeline<ul> <li>This should include all information about the various run commands provided within the pipeline. This should include the following pages:<ul> <li>Pipeline Overview</li> <li>Commands explained</li> <li>Typical Workflow</li> </ul> </li> </ul> </li> <li>Expected Output<ul> <li>This should include all pertinent information about output files, including extensions that differentiate files.</li> </ul> </li> <li>Running Test Data<ul> <li>This should walk the user through the steps of running the pipeline using test data. This should include the following pages:<ul> <li>Getting Started</li> <li>About the test data</li> <li>Submit the test data</li> <li>Review outputs</li> </ul> </li> </ul> </li> </ol> </li> </ul> <h2 id=repository-management>Repository Management<a class=headerlink href=#repository-management title="Permanent link">&para;</a></h2> <h3 id=security-settings>Security settings<a class=headerlink href=#security-settings title="Permanent link">&para;</a></h3> <ul> <li><code>AdminTeam</code> should have a minimum of <code>maintain</code> role to the repo</li> <li>Both the develop and master branch must be protected (IE have to have a PR to be changed)</li> <li>Repo visibility should be set to Private or Internal and made Public only when required.</li> </ul> <h3 id=ccbr-branch-strategy>CCBR Branch Strategy<a class=headerlink href=#ccbr-branch-strategy title="Permanent link">&para;</a></h3> <h4 id=branch-naming>Branch Naming<a class=headerlink href=#branch-naming title="Permanent link">&para;</a></h4> <ul> <li>All repositories should follow the strategy outlined in the <a href=../basic_repo/ >Creating your GitHub repo</a></li> </ul> <h4 id=branch-overview>Branch Overview<a class=headerlink href=#branch-overview title="Permanent link">&para;</a></h4> <ul> <li>All repositories should include a minimum of two branches at any time: <ul> <li>main ( or master ) </li> <li>dev</li> </ul> </li> <li>Additional branches should be created as needed. These would include feature branches, developed using individual, feature specific addition and hotfix branches, developed using individual, bug specific fixes. </li> <li>Utilization of these branches should follow the documentation below.</li> </ul> <h4 id=strategy-outline>Strategy Outline<a class=headerlink href=#strategy-outline title="Permanent link">&para;</a></h4> <ul> <li>We encourage the use of the <a href=https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow>Git Flow tools</a> for some actions, available on Biowulf (module load gitflow). Our current branching strategy is based off of the Git Flow strategy shown below :</li> </ul> <p><img alt src=../../images/gitmodel.png> ref:https://nvie.com/posts/a-successful-git-branching-model/</p> <ol> <li>Master (named main or master)<ul> <li>branch that contains the current release / tagged version of the pipeline</li> <li>merges from Dev branch or hotfix branch allowed</li> <li>merges require actions_master_branch <code>pass</code> from GitHub actions. See <a href=../basic_actions/ >GitHub actions</a> #4 for more information testing requirements for merge</li> </ul> </li> <li>Develop (named dev or activeDev)<ul> <li>branch that contains current dev</li> <li>merges from feature branch allowed</li> <li>merges require actions_dev_branch <code>pass</code> from GitHub actions. See <a href=../basic_actions/ >GitHub actions</a> #3 for more information testing requirements for merge</li> </ul> </li> <li>Feature (named feature/unique_feature_name)<ul> <li>branch to develop new features that branches off the develop branch</li> <li>recommended usages of <code>git flow feature start unique_feature_name</code> followed by <code>git flow feature publish unique_feature_name</code></li> <li>no merges into this branch are expected</li> </ul> </li> <li>Hotfix (named unique_hotfix_name)<ul> <li>branches arise from a bug that has been discovered and must be resolved; it enables developers to keep working on their own changes on the develop branch while the bug is being fixed</li> <li>recommended usage of <code>git flow hotfix start unique_hotfix_name</code></li> <li>no merges into this branch are expected </li> </ul> </li> </ol> <blockquote> <p>ðŸ’¡ <strong>Note</strong><br> While the <code>git flow feature start</code> command is recommended for feature branch creation, the <code>git flow feature finish</code> command is not. Using the <code>finish</code> command will automatically merge the <code>feature</code> branch into the <code>dev</code> branch without any testing and regardless of any divergence that may have occurred during feature development.</p> </blockquote> <h4 id=general-workflow-steps>General Workflow (Steps)<a class=headerlink href=#general-workflow-steps title="Permanent link">&para;</a></h4> <ol> <li>Assuming that you have already cloned the repo and initiated git flow with <code>git flow init</code></li> <li>Create a new feature and publish it <code>git flow feature start unique_feature_name</code> and then <code>git flow feature publish unique_feature_name</code>. The <em>unique_feature_name</em> will be created from the <em>develop</em> branch.</li> <li>Code normally, make frequent commits, push frequently to remote. These commits are added to the <em>unique_feature_name</em> branch.</li> <li>When you are ready to add your feature enhancements back to the <em>develop</em> branch, you may have to make sure that the <em>develop</em> branch has not marched forward while you were working on the <em>unique_feature_name</em> feature (This is possible as other may have added their PRs in the interim). If it has, then you may have to pull in changes made to <em>develop</em> branch into your <em>unique_feature_name</em> feature branch. This can be achieved using the GitHub web interface... <strong>merge</strong> <strong>develop</strong> &larr; <strong>unique_feature_name</strong>. Resolve conflicts if any.</li> <li>Retest your <em>unique_feature_name</em> branch.</li> <li>Now send in a pull request using the GitHub web interface to pull your <em>unique_feature_name</em> into <em>develop</em> branch.</li> <li>Occasionally, we may create a new <em>release</em> branch from the <em>develop</em> branch and perform thorough E2E testing with fixes. Once, everything is working as expected, we pull the <em>release</em> branch back into <em>develop</em> and also push it to <em>main</em> with a version tag.</li> </ol> <h4 id=release-tagged-nomenclature>Release, Tagged Nomenclature<a class=headerlink href=#release-tagged-nomenclature title="Permanent link">&para;</a></h4> <ul> <li> <p>The following format of versioning should be followed:</p> <pre class=highlight><code>vX.Y.Z</code></pre> </li> <li> <p>The following rules should be applies when determining the version release:</p> <ul> <li>X is major; non-backward compatible (dependent on the amount of changes; from dev) </li> <li>Y is minor; backwards compatible (dependent on the amount of changes; from dev) </li> <li>Z is patches; backwards compatible (bugs; hot fixes) </li> </ul> </li> <li> <p>Other notes:</p> <ul> <li>X,Y,Z must be numeric only</li> <li>All updates to the main (master) branch must be tagged and versioned using the parameters above</li> <li>Updates to the dev branch can be tagged, but should not be versioned</li> <li>If the pipeline is available locally (IE on Biowulf), version changes should be added for use</li> </ul> </li> </ul> <h3 id=pipelines-test-data>Pipelines Test Data<a class=headerlink href=#pipelines-test-data title="Permanent link">&para;</a></h3> <p>The following information is meant to outline test_data requirements for all pipelines, however, should be altered to fit the needs of the specific pipeline or project developed.</p> <h4 id=requirements>Requirements<a class=headerlink href=#requirements title="Permanent link">&para;</a></h4> <ol> <li>Location of data<ul> <li>Test data sets should be stored within a <code>.test</code> directory, as found in all templates. </li> </ul> </li> <li>Documentation<ul> <li>Review information on the <a href=../basic_docs/ >documentation</a> page, which will provide basic information on test data used within the project/pipeline.</li> <li>A README file should be created under the <code>.test</code> directory, to include the following information:<ul> <li>Date of implementation</li> <li>Information on species (IE Homo Sapiens) and data type (IE RNA-Seq)</li> <li>Information on the references to be used (IE hg38)</li> <li>Metadata manifests required by the pipeline</li> <li>The source of the files</li> <li>Link to scripts used in created the partial test data</li> </ul> </li> </ul> </li> <li>Choosing a test data set<ul> <li>At a minimum three test sets are recommended to be available: <br> 1) Should include sub-sampled inputs, to test the pipelines functionality, and to be used as the tutorial <code>test set</code>. 2) Should include full-sample inputs, of high quality, to test the robustness of the pipelines resources 3) Should include full-sample inputs, of expected project-level quality, to test the robustness of the pipelines error handling</li> <li>Test data should come from a CCBR project or a publicly available source. Care should be taken when choosing test data sets, to ensure that the robustness of the pipeline will be tested, as well as the ability of the pipeline to handle both high and low quality data. Multiple test sets may need to be created to meet these goals. On BIOWULF, these test data files can be stored under <code>/data/CCBR_Pipeliner/testdata</code> for easy access by all users of the pipeline(s).</li> </ul> </li> </ol> </div> </div><footer> <div class=rst-footer-buttons role=navigation aria-label="Footer Navigation"> <a href=../howto_precommit/ class="btn btn-neutral float-left" title="Using Pre-Commit"><span class="icon icon-circle-arrow-left"></span> Previous</a> <a href=../sop_techdev/ class="btn btn-neutral float-right" title=TechDev>Next <span class="icon icon-circle-arrow-right"></span></a> </div> <hr> <div role=contentinfo> <!-- Copyright etc --> <p>Copyright &copy; 2025 CCBR</p> </div> Built with <a href=https://www.mkdocs.org/ >MkDocs</a> using a <a href=https://github.com/readthedocs/sphinx_rtd_theme>theme</a> provided by <a href=https://readthedocs.org>Read the Docs</a>. </footer> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span> <a href=https://github.com/CCBR/HowTos class="fa fa-code-fork" style="color: #fcfcfc"> CCBR/HowTos</a> </span> <span><a href=../howto_precommit/ style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../sop_techdev/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../../js/jquery-3.6.0.min.js></script> <script>var base_url = "../..";</script> <script src=../../js/theme_extra.js></script> <script src=../../js/theme.js></script> <script src=../../search/main.js></script> <script src=../../js/version-select.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 