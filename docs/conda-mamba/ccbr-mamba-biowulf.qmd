---
title: "Using the shared CCBR mamba installation on Biowulf"
#description:
author: "Kelly Sovacool"
---

You can configure conda/mamba to use our shared CCBR installation of miniforge3
on Biowulf, which will allow you to access CCBR environments while also creating
your own environments.

## Initialize your shell

Initialize your shell with mamba. This will modify your shell's rc file (e.g.
`~/.zshrc`/`~/.bashrc`) to allow you to use mamba.

Specify your shell language with `--shell SHELL`. The below example is for `zsh`:

```sh
/data/CCBR_Pipeliner/db/PipeDB/miniforge3/bin/mamba shell init --shell zsh --root-prefix=/data/$USER/mamba
```

or `bash`:

```sh
/data/CCBR_Pipeliner/db/PipeDB/miniforge3/bin/mamba shell init --shell bash --root-prefix=/data/$USER/mamba
```

We recommend setting `--root-prefix` to your data directory `/data/$USER` since
more space is available than in your home direcotry `~/`.

## Update your conda configuration

`~/.condarc`
```
channels:
  - conda-forge
  - bioconda
channel_priority: strict
show_channel_urls: true
envs_dirs:
  - /data/$USER/mamba/envs/
  - /data/CCBR_Pipeliner/db/PipeDB/miniforge3/envs/
pkgs_dirs:
  - /data/$USER/mamba/pkgs/
denylist_channels:
  - https://repo.anaconda.com/pkgs/main
  - https://repo.anaconda.com/pkgs/r
```

## Verify mamba setup

```sh
mamba info
```
```
       libmamba version : 2.1.1
          mamba version : 2.1.1
           curl version : libcurl/8.14.1 OpenSSL/3.5.1 zlib/1.3.1 zstd/1.5.7 libssh2/1.11.1 nghttp2/1.64.0
     libarchive version : libarchive 3.7.7 zlib/1.3.1 liblzma/5.8.1 bz2lib/1.0.8 liblz4/1.10.0 libzstd/1.5.7
       envs directories : /gpfs/gsfs12/users/$USER/mamba/envs
                          /vf/users/CCBR_Pipeliner/db/PipeDB/miniforge3/envs
          package cache : /gpfs/gsfs12/users/$USER/mamba/pkgs
            environment : base (active)
           env location : /gpfs/gsfs12/users/$USER/mamba
      user config files : /home/$USER/.mambarc
 populated config files : /home/$USER/.condarc
       virtual packages : __unix=0=0
                          __linux=4.18.0=0
                          __glibc=2.28=0
                          __archspec=1=x86_64_v4
               channels : https://conda.anaconda.org/conda-forge/linux-64
                          https://conda.anaconda.org/conda-forge/noarch
                          https://conda.anaconda.org/bioconda/linux-64
                          https://conda.anaconda.org/bioconda/noarch
       base environment : /gpfs/gsfs12/users/$USER/mamba
               platform : linux-64
```

(`$USER` will be filled in with your actual username on Biowulf.)

New channels you create will be in `/data/$USER/mamba/envs/`, but you will also
be able to activate any channel `/data/CCBR_Pipeliner/db/PipeDB/miniforge3/envs/`

### Activate a CCBR environment

```
mamba activate py3.11-8
mamba deactivate
```

### Create a new environment

```sh
mamba create -n mytestenv python=3.13 r-base=4.5
```
```
conda-forge/linux-64                                        Using cache
conda-forge/noarch                                          Using cache
bioconda/linux-64                                           Using cache
bioconda/noarch                                             Using cache


Transaction

  Prefix: /gpfs/gsfs12/users/$USER/mamba/envs/mytestenv

  Updating specs:

   - python=3.13
   - r-base=4.5
```

The environment will be created in `/data/$USER/mamba/envs/mytestenv`.

### View environments

```sh
mamba info --envs
```

You should see both your personal environments and the shared CCBR environments.